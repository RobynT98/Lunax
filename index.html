<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#1b1b1b" />
    <meta name="description" content="Lunax – lokal-först PWA-dagbok med rich text och JSON export/import." />
    <!-- Viktigt: använd %BASE_URL% så Pages-subpath funkar -->
    <link rel="icon" type="image/svg+xml" href="%BASE_URL%icons/favicon.svg" />
    <link rel="manifest" href="%BASE_URL%manifest.webmanifest" />
    <title>Lunax</title>

    <!-- Fonts (cachas via SW) -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Merriweather:wght@400;700&family=Cormorant:wght@500&family=JetBrains+Mono:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Minimal loader/fallback */
      #boot-fallback {
        position: fixed; inset: 0; display: grid; place-items: center;
        background: #0f0f10; color: #e5e7eb; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif;
      }
      #boot-fallback .card {
        padding: 12px 14px; border-radius: 12px; background: #1f1f22; border: 1px solid rgba(255,255,255,.06);
        max-width: 560px;
      }
      #boot-fallback code { background: rgba(255,255,255,.06); padding: 2px 4px; border-radius: 6px; }
    </style>
  </head>

  <body class="bg-neutral-950 text-neutral-100 font-sans">
    <noscript>Du behöver JavaScript aktiverat för att använda Lunax.</noscript>

    <div id="root"></div>

    <!-- Fallback: om bundlen inte mountar inom 3s, visa kort med ledtrådar -->
    <div id="boot-fallback" hidden>
      <div class="card">
        <strong>Kunde inte starta appen.</strong>
        <div style="font-size:14px;margin-top:6px;opacity:.9">
          Testa att uppdatera, eller öppna <code>%BASE_URL%</code> i ny flik.
          Om problemet kvarstår: rensa “Site data” och inaktivera ev. gammal service worker.
        </div>
      </div>
    </div>
    <script>
      (function () {
        var shown = false;
        var t = setTimeout(function () {
          if (shown) return;
          shown = true;
          var el = document.getElementById('boot-fallback');
          if (el) el.hidden = false;
        }, 3000);
        window.__lunaxBootOk = function () {
          shown = true;
          clearTimeout(t);
        };
      })();
    </script>

    <!-- Viktigt: relativ + Vite skriver om med base. %BASE_URL% ger rätt path på Pages -->
    <script type="module" src="%BASE_URL%src/main.tsx"></script>
  </body>
</html>